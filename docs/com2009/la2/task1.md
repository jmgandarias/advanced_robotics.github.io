---  
title: "Task 1: Creating a Deployable ROS Package"
---  

Submit a working ROS package that can be successfully deployed to control *a real TurtleBot3 Waffle*, making it follow a prescribed motion profile whilst printing key information to the terminal.

**Assessment Format**: Real Robots  
**Marks**: 20/100

## Summary

The main aims of this task are as follows:

1. Learn how to work with the real robots. 
1. Get to grips with the process for preparing your ROS package for submission (as required for this and all further tasks).

A lot of the functionality that you will need to implement here will be familiar to you from Lab Assignment #1, but you'll need to enhance things a bit. The main objective is to create a ROS node (or multiple nodes) that make your robot follow a **figure-of-eight** pattern on the robot arena floor. The figure-of-eight trajectory should be generated by following two loops, both 1 meter in diameter, as shown below. <a name="fig-eight"></a>

<figure markdown>
  ![](figures/task1_motion_path.png){width=400px}
  <figcaption>The figure-of-eight path for Task 1.</figcaption>
</figure>

Whilst doing this, you will also need to print some robot odometry data to the terminal at regular intervals ([see below for the specifics](#details)). In order to get the terminal message formatting right, you might want to have a look at the documentation on [Python String Formatting](https://docs.python.org/3/tutorial/inputoutput.html), or refer to any of the code examples that we provided you with during Lab Assignment #1 that involved printing messages to the terminal.

With regard to the odometry and keeping track of your robot's pose, remember what we covered in [Lab Assignment #1, Week 2](../../la1/week2).

## Details

1. The robot must start by moving anti-clockwise, following a circular motion path of 1 m diameter ("Loop 1", as shown in [the figure above](#fig-eight)).
1. Once complete, the robot must then turn clockwise to follow a second circular path, again of 1 m diameter ("Loop 2").
1. After Loop 2 the robot must stop, at which point it *should* be located back at its starting point.
1. The velocity of the robot should be set to ensure that the whole sequence takes approximately 60 seconds to complete (:material-plus-minus:5 seconds).
1. The robot's current odometry data should be printed to the terminal throughout, where messages should be of the following format: <a name="msg-format"></a>
	
        x={x} [m], y={y} [m], yaw={yaw} [degrees].
	
	Where `{x}`, `{y}` and `{yaw}` should be replaced with the correct real-time odometry data as follows:
	
	1. `{x}`: the robot's linear position in the X axis, quoted in meters to two decimal places.
    1. `{y}`: the robot's linear position in the Y axis, quoted in meters to two decimal places.
	1. `{yaw}`: the robot's orientation about the Z axis, quoted in degrees to one decimal place.
	
	The data should be quoted relative to its starting position at the beginning of the task, e.g. at the start of the task (before the robot has moved) the terminal messages should read:

        x=0.00 [m], y=0.00 [m], yaw=0.0 [degrees].
	
	These message should be printed to the terminal at a rate of 1Hz. It doesn't matter if the messages continue to be printed to the terminal after the robot has stopped (i.e. after the figure-of-eight has been completed).
	
1. The ROS package that you submit must contain a launch file called `task1.launch`, which will be used by the teaching team to execute the functionality from within your package. This functionality must be launch-able via the command: <a name="launch"></a>
	 
	```bash
    roslaunch com2009_team{} task1.launch
    ```
	
	... where `{}` will be replaced with *your team number*.
	 
	(ROS will already be running on the robot before we attempt to execute your launch file).
  
### A note on Odometry

When the robot is placed in the arena at the start of the task its odometry may not necessarily read zero, so you will need to compensate for this. You'll therefore need to grab the robot pose from the `/odom` topic before your robot starts moving, and then use that as the zero-reference to convert all the subsequent odometry readings that you obtain throughout the task.

## Simulation Resources

It's easier to develop your node(s) in simulation before testing things out on a real robot. You can use the standard `empty_world` environment to do this, which (as you'll recall from Lab Assignment #1) can be launched in WSL-ROS using the following command:

```bash
roslaunch turtlebot3_gazebo turtlebot3_empty_world.launch
```

(or by using the `tb3_empty_world` command-line alias).

For the real task, there will be cylindrical objects placed at the theoretical centre of each of the figure-of-eight loops, so your robot will need to move around these as it completes the task. We have therefore also created a simulation environment that is representative of the real world environment during the assessment. This is available in the `com2009_simulations` package, and can be launched with the following command:

```bash
roslaunch com2009_simulations task1.launch
```

<figure markdown>
  ![](figures/task1.jpg)
  <figcaption>The development arena for Task 1.</figcaption>
</figure>

!!! note
    There won't be any loop markers on the real robot arena floor during the assessment.

## Marking

This task will be assessed by the teaching team before the further submission deadlines in Week 12. If things don't work then we'll let you know what happened, so that you can try to resolve things for the further assignment submissions.

There are **20 marks** available for this task in total, awarded based on the criteria outlined below.

### Criterion A: A deployable ROS package
 
**Marks:** 10/20 

You will be awarded full marks here if you submit a ROS package containing a launch file [as specified above](#launch), you submit your package according to the [Key Submission Requirements](../overview/#key-requirements) and your package can successfully be deployed on one of the robotics laptops. If **any** of these requirements are not met then you will be awarded zero marks for the entire task, gulp!

### Criterion B: Figure-of-eight

**Marks:** 5/20

<center>

| Criteria | Details | Marks|
| :--- | :--- | :--- |
| **B.1**: Direction of travel | The robot must move anticlockwise for the first loop ("Loop 1") and then clockwise for the second ("Loop 2"). | 1 |
| **B.2**: Loop 1 | The loop must be ~1 m in diameter, centered about the red beacon. | 1 |
| **B.3**: Loop 2 | The loop must be ~1 m in diameter, centered about the blue beacon. | 1 |
| **B.4**: Stopping | Once the robot completes its figure of eight, it must stop with both wheels **within 10 cm** of the start line. | 1 |
| **B.5**: Timing | The robot must complete the full figure of eight and stop in 55-65 seconds. | 1 |

</center>

### Criterion C: Odometry messages

**Marks:** 5/20

<center>

| Criteria | Details | Marks|
| :--- | :--- | :--- |
| **C.1**: Rate | Messages should be printed to the terminal at **a rate of 1 Hz**. | 1 |
| **C.2**: Format | The messages printed to the terminal should be formatted **exactly** [as detailed above](#msg-format). | 1 |
| **C.3**: Data | Each message value (`x`, `y` and `yaw`) should be plausible, that is: they each correspond to the actual pose of the robot, based on a zero point at the start/finish point ([as illustrated above](#fig-eight)). In addition, each value must be quoted in the correct units (meters or degrees, as appropriate). | 3 |

</center>

If your package is not deployable on the first submission then you'll have an opportunity to resubmit this before the end of Week 12, giving you a second chance to get things right and obtain some marks here. Any resubmissions will not be eligible for any marks for Criterion A on the second attempt though, so your team will only be able to achieve a maximum mark of 10/20 in such cases.

!!! warning 
    We will be offering a resubmission opportunity **for this task only**. Resubmission of any further tasks **won't** be possible!